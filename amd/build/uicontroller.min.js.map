{"version":3,"sources":["../src/uicontroller.js"],"names":["mod_wordcloud_fs_toggle","document","fullscreenElement","fs_element","getElementById","requestFullscreen","exitFullscreen","mod_wordcloud_hex_to_hsl","color","replace","m","r","g","b","substring","match","map","x","parseInt","max","Math","min","h","s","l","d","round","init","colors","length","stylerules","editCSS","createElement","i","j","floor","random","innerHTML","head","appendChild","invert","nextstep","fs_btn","fullscreenEnabled","style","display","addEventListener","onfullscreenchange","fs_icon","className"],"mappings":"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","sourcesContent":["const mod_wordcloud_fs_toggle = () => {\n    if (document.fullscreenElement === null) {\n        var fs_element = document.getElementById('mod-wordcloud-content');\n        fs_element.requestFullscreen();\n    } else {\n        document.exitFullscreen();\n    }\n};\n\nconst mod_wordcloud_hex_to_hsl = (color) => {\n    var [r, g, b] = color.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i, (m, r, g, b) => '#' + r + r + g + g + b + b)\n        .substring(1).match(/.{2}/g).map(x => parseInt(x, 16));\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n\n    var max = Math.max(r, g, b), min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max == min) {\n        h = s = 0;\n    } else {\n        var d = (max - min);\n        s = l >= 0.5 ? d / (2 - (max + min)) : d / (max + min);\n        switch (max) {\n            case r: h = ((g - b) / d + 0)*60; break;\n            case g: h = ((b - r) / d + 2)*60; break;\n            case b: h = ((r - g) / d + 4)*60; break;\n        }\n    }\n    return [Math.round(h), Math.round(s*100), Math.round(l*100)];\n};\n\nexport const init = colors => {\n    if (colors.length == 6) {\n        var stylerules = '';\n        var editCSS = document.createElement('style');\n\n        for (let i = colors.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [colors[i], colors[j]] = [colors[j], colors[i]];\n        }\n\n        for (let i = 1; i <= colors.length; i++) {\n            stylerules += '.path-mod-wordcloud .w' + i + ' {color: #' + colors[i - 1] + ';} \\n';\n        }\n\n        editCSS.innerHTML = stylerules;\n        document.head.appendChild(editCSS);\n    } else if (colors.length == 2) {\n        var stylerules = '';\n        var editCSS = document.createElement('style');\n        var invert = true;\n\n        for (let i = 0; i < colors.length; i++) {\n            var [h, s, l] = mod_wordcloud_hex_to_hsl(colors[i]);\n\n            if (l >= 80) {\n                l = 10;\n            }\n\n            var nextstep = Math.round((80 - l) / 2);\n            var j = invert ? 0 : 7;\n\n            while (j != 3 && j != 4) {\n                j = invert ? j + 1 : j - 1;\n                stylerules += '.path-mod-wordcloud .w' + j + ' {color: hsl(' + h + ', ' + s + '%, ' + l + '%);} \\n';\n                l = l + nextstep;\n            }\n\n            invert = false;\n        }\n\n        editCSS.innerHTML = stylerules;\n        document.head.appendChild(editCSS);\n    }\n\n    var fs_btn = document.getElementById('mod-wordcloud-fs-btn');\n\n    if (!document.fullscreenEnabled) {\n        fs_btn.style.display = \"none\";\n    } else {\n        fs_btn.addEventListener(\"click\", function () {\n            mod_wordcloud_fs_toggle();\n        });\n\n        document.onfullscreenchange = function () {\n            var fs_icon = document.getElementById('mod-wordcloud-fs-icon');\n            if (document.fullscreenElement === null) {\n                fs_icon.className = fs_icon.className.replace(/\\bfa-compress\\b/g, \"fa-expand\");\n            } else {\n                fs_icon.className = fs_icon.className.replace(/\\bfa-expand\\b/g, \"fa-compress\");\n            }\n        };\n    }\n};"],"file":"uicontroller.min.js"}