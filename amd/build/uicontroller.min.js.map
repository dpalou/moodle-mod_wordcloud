{"version":3,"file":"uicontroller.min.js","sources":["../src/uicontroller.js"],"sourcesContent":["const mod_wordcloud_set_height = () => {\n    const wb = document.getElementById('mod-wordcloud-div');\n    const divheight = wb.offsetHeight;\n    let newwidth = 0;\n\n    if (divheight < 300) {\n        newwidth = 60;\n    } else if (divheight < 500) {\n        newwidth = 70;\n    } else if (divheight < 700) {\n        newwidth = 80;\n    } else {\n        newwidth = 100;\n    }\n\n    if (window.innerWidth > 900) {\n        if (wb.style.width == '' || newwidth > parseInt(wb.style.width)) {\n            wb.style.width = newwidth + \"%\";\n        }\n    }\n};\n\nconst mod_wordcloud_fs_toggle = () => {\n    if (document.fullscreenElement === null) {\n        var fs_element = document.getElementById('mod-wordcloud-content');\n        fs_element.requestFullscreen();\n    } else {\n        document.exitFullscreen();\n    }\n};\n\nconst mod_wordcloud_hex_to_hsl = (color) => {\n    var [r, g, b] = color.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i, (m, r, g, b) => '#' + r + r + g + g + b + b)\n        .substring(1).match(/.{2}/g).map(x => parseInt(x, 16));\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n\n    var max = Math.max(r, g, b), min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max == min) {\n        h = s = 0;\n    } else {\n        var d = (max - min);\n        s = l >= 0.5 ? d / (2 - (max + min)) : d / (max + min);\n        switch (max) {\n            case r: h = ((g - b) / d + 0)*60; break;\n            case g: h = ((b - r) / d + 2)*60; break;\n            case b: h = ((r - g) / d + 4)*60; break;\n        }\n    }\n    return [Math.round(h), Math.round(s*100), Math.round(l*100)];\n};\n\nexport const init = colors => {\n    const targetnode = document.getElementById('mod-wordcloud-words-box');\n    const config = { childList: true};\n    const callback = (mutationList) => {\n        for (const mutation of mutationList) {\n            if (mutation.type === 'childList') {\n                mod_wordcloud_set_height();\n            }\n        }\n    };\n\n    const observer = new MutationObserver(callback);\n    observer.observe(targetnode, config);\n    mod_wordcloud_set_height();\n\n    var stylerules = '';\n    var editCSS = document.createElement('style');\n\n    if (colors.length == 6) {\n        for (let i = colors.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [colors[i], colors[j]] = [colors[j], colors[i]];\n        }\n\n        for (let i = 1; i <= colors.length; i++) {\n            stylerules += '.path-mod-wordcloud .w' + i + ' {color: #' + colors[i - 1] + ';} \\n';\n        }\n    } else if (colors.length == 1) {\n        var [h, s, l] = mod_wordcloud_hex_to_hsl(colors[0]);\n        var nextstep = 8;\n\n        l = 30;\n\n        for (let i = 1; i < 7; i++) {\n            stylerules += '.path-mod-wordcloud .w' + i + ' {color: hsl(' + h + ', ' + s + '%, ' + l + '%);} \\n';\n            l = l + nextstep;\n            nextstep++;\n        }\n    }\n\n    editCSS.innerHTML = stylerules;\n    document.head.appendChild(editCSS);\n\n    var fs_btn = document.getElementById('mod-wordcloud-fs-btn');\n\n    if (!document.fullscreenEnabled) {\n        fs_btn.style.display = \"none\";\n    } else {\n        fs_btn.addEventListener(\"click\", function () {\n            mod_wordcloud_fs_toggle();\n        });\n\n        document.onfullscreenchange = function () {\n            var fs_icon = document.getElementById('mod-wordcloud-fs-icon');\n            if (document.fullscreenElement === null) {\n                fs_icon.className = fs_icon.className.replace(/\\bfa-compress\\b/g, \"fa-expand\");\n            } else {\n                fs_icon.className = fs_icon.className.replace(/\\bfa-expand\\b/g, \"fa-compress\");\n            }\n        };\n    }\n\n    var element = document.getElementById('mod-wordcloud-content');\n    element.style.visibility = \"visible\";\n};"],"names":["mod_wordcloud_set_height","wb","document","getElementById","divheight","offsetHeight","newwidth","window","innerWidth","style","width","parseInt","colors","targetnode","MutationObserver","mutationList","mutation","type","observe","childList","stylerules","editCSS","createElement","length","i","j","Math","floor","random","h","s","l","color","r","g","b","replace","m","substring","match","map","x","max","min","d","round","mod_wordcloud_hex_to_hsl","nextstep","innerHTML","head","appendChild","fs_btn","fullscreenEnabled","addEventListener","fullscreenElement","requestFullscreen","exitFullscreen","onfullscreenchange","fs_icon","className","display","visibility"],"mappings":"uJAAMA,yBAA2B,WACvBC,GAAKC,SAASC,eAAe,qBAC7BC,UAAYH,GAAGI,iBACjBC,SAAW,EAGXA,SADAF,UAAY,IACD,GACJA,UAAY,IACR,GACJA,UAAY,IACR,GAEA,IAGXG,OAAOC,WAAa,MACE,IAAlBP,GAAGQ,MAAMC,OAAeJ,SAAWK,SAASV,GAAGQ,MAAMC,UACrDT,GAAGQ,MAAMC,MAAQJ,SAAW,oBAuCpBM,eACVC,WAAaX,SAASC,eAAe,2BAU1B,IAAIW,kBARHC,mBACT,MAAMC,YAAYD,aACG,cAAlBC,SAASC,MACTjB,8BAMHkB,QAAQL,WAVF,CAAEM,WAAW,IAW5BnB,+BAEIoB,WAAa,GACbC,QAAUnB,SAASoB,cAAc,YAEhB,GAAjBV,OAAOW,OAAa,KACf,IAAIC,EAAIZ,OAAOW,OAAS,EAAGC,EAAI,EAAGA,IAAK,OAClCC,EAAIC,KAAKC,MAAMD,KAAKE,UAAYJ,EAAI,KACzCZ,OAAOY,GAAIZ,OAAOa,IAAM,CAACb,OAAOa,GAAIb,OAAOY,QAG3C,IAAIA,EAAI,EAAGA,GAAKZ,OAAOW,OAAQC,IAChCJ,YAAc,yBAA2BI,EAAI,aAAeZ,OAAOY,EAAI,GAAK,aAE7E,GAAqB,GAAjBZ,OAAOW,OAAa,KACtBM,EAAGC,EAAGC,GArDeC,CAAAA,YACzBC,EAAGC,EAAGC,GAAKH,MAAMI,QAAQ,oCAAoC,CAACC,EAAGJ,EAAGC,EAAGC,IAAM,IAAMF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,IACvGG,UAAU,GAAGC,MAAM,SAASC,KAAIC,GAAK9B,SAAS8B,EAAG,MAEtDR,GAAK,IACLC,GAAK,IACLC,GAAK,QAGDN,EAAGC,EADHY,IAAMhB,KAAKgB,IAAIT,EAAGC,EAAGC,GAAIQ,IAAMjB,KAAKiB,IAAIV,EAAGC,EAAGC,GACxCJ,GAAKW,IAAMC,KAAO,KAExBD,KAAOC,IACPd,EAAIC,EAAI,MACL,KACCc,EAAKF,IAAMC,WACfb,EAAIC,GAAK,GAAMa,GAAK,GAAKF,IAAMC,MAAQC,GAAKF,IAAMC,KAC1CD,UACCT,EAAGJ,EAAsB,KAAhBK,EAAIC,GAAKS,EAAI,cACtBV,EAAGL,EAAsB,KAAhBM,EAAIF,GAAKW,EAAI,cACtBT,EAAGN,EAAsB,KAAhBI,EAAIC,GAAKU,EAAI,UAG5B,CAAClB,KAAKmB,MAAMhB,GAAIH,KAAKmB,MAAQ,IAAFf,GAAQJ,KAAKmB,MAAQ,IAAFd,KA+BjCe,CAAyBlC,OAAO,IAC5CmC,SAAW,EAEfhB,EAAI,OAEC,IAAIP,EAAI,EAAGA,EAAI,EAAGA,IACnBJ,YAAc,yBAA2BI,EAAI,gBAAkBK,EAAI,KAAOC,EAAI,MAAQC,EAAI,UAC1FA,GAAQgB,SACRA,WAIR1B,QAAQ2B,UAAY5B,WACpBlB,SAAS+C,KAAKC,YAAY7B,aAEtB8B,OAASjD,SAASC,eAAe,wBAEhCD,SAASkD,mBAGVD,OAAOE,iBAAiB,SAAS,WAjFF,OAA/BnD,SAASoD,kBACQpD,SAASC,eAAe,yBAC9BoD,oBAEXrD,SAASsD,oBAiFTtD,SAASuD,mBAAqB,eACtBC,QAAUxD,SAASC,eAAe,yBACH,OAA/BD,SAASoD,kBACTI,QAAQC,UAAYD,QAAQC,UAAUvB,QAAQ,mBAAoB,aAElEsB,QAAQC,UAAYD,QAAQC,UAAUvB,QAAQ,iBAAkB,iBAXxEe,OAAO1C,MAAMmD,QAAU,OAgBb1D,SAASC,eAAe,yBAC9BM,MAAMoD,WAAa"}