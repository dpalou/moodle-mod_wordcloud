{"version":3,"file":"uicontroller.min.js","sources":["../src/uicontroller.js"],"sourcesContent":["const mod_wordcloud_fs_toggle = () => {\n    if (document.fullscreenElement === null) {\n        var fs_element = document.getElementById('mod-wordcloud-content');\n        fs_element.requestFullscreen();\n    } else {\n        document.exitFullscreen();\n    }\n};\n\nconst mod_wordcloud_hex_to_hsl = (color) => {\n    var [r, g, b] = color.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i, (m, r, g, b) => '#' + r + r + g + g + b + b)\n        .substring(1).match(/.{2}/g).map(x => parseInt(x, 16));\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n\n    var max = Math.max(r, g, b), min = Math.min(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if (max == min) {\n        h = s = 0;\n    } else {\n        var d = (max - min);\n        s = l >= 0.5 ? d / (2 - (max + min)) : d / (max + min);\n        switch (max) {\n            case r: h = ((g - b) / d + 0)*60; break;\n            case g: h = ((b - r) / d + 2)*60; break;\n            case b: h = ((r - g) / d + 4)*60; break;\n        }\n    }\n    return [Math.round(h), Math.round(s*100), Math.round(l*100)];\n};\n\nexport const init = colors => {\n    var stylerules = '';\n    var editCSS = document.createElement('style');\n\n    if (colors.length == 6) {\n        for (let i = colors.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [colors[i], colors[j]] = [colors[j], colors[i]];\n        }\n\n        for (let i = 1; i <= colors.length; i++) {\n            stylerules += '.path-mod-wordcloud .w' + i + ' {color: #' + colors[i - 1] + ';} \\n';\n        }\n\n        editCSS.innerHTML = stylerules;\n        document.head.appendChild(editCSS);\n    } else if (colors.length == 2) {\n        var invert = true;\n\n        for (let i = 0; i < colors.length; i++) {\n            var [h, s, l] = mod_wordcloud_hex_to_hsl(colors[i]);\n\n            if (l >= 80) {\n                l = 10;\n            }\n\n            var nextstep = Math.round((80 - l) / 2);\n            var j = invert ? 0 : 7;\n\n            while (j != 3 && j != 4) {\n                j = invert ? j + 1 : j - 1;\n                stylerules += '.path-mod-wordcloud .w' + j + ' {color: hsl(' + h + ', ' + s + '%, ' + l + '%);} \\n';\n                l = l + nextstep;\n            }\n\n            invert = false;\n        }\n\n        editCSS.innerHTML = stylerules;\n        document.head.appendChild(editCSS);\n    }\n\n    var fs_btn = document.getElementById('mod-wordcloud-fs-btn');\n\n    if (!document.fullscreenEnabled) {\n        fs_btn.style.display = \"none\";\n    } else {\n        fs_btn.addEventListener(\"click\", function () {\n            mod_wordcloud_fs_toggle();\n        });\n\n        document.onfullscreenchange = function () {\n            var fs_icon = document.getElementById('mod-wordcloud-fs-icon');\n            if (document.fullscreenElement === null) {\n                fs_icon.className = fs_icon.className.replace(/\\bfa-compress\\b/g, \"fa-expand\");\n            } else {\n                fs_icon.className = fs_icon.className.replace(/\\bfa-expand\\b/g, \"fa-compress\");\n            }\n        };\n    }\n};"],"names":["mod_wordcloud_hex_to_hsl","color","replace","m","r","g","b","substring","match","map","x","parseInt","h","s","max","Math","min","l","d","round","colors","stylerules","editCSS","document","createElement","length","i","j","floor","random","innerHTML","head","appendChild","invert","nextstep","fs_btn","getElementById","fullscreenEnabled","addEventListener","fullscreenElement","requestFullscreen","exitFullscreen","onfullscreenchange","fs_icon","className","style","display"],"mappings":"0wCASMA,yBAA2B,SAACC,iCACdA,MAAMC,QAAQ,oCAAoC,SAACC,EAAGC,EAAGC,EAAGC,SAAM,IAAMF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,KACvGC,UAAU,GAAGC,MAAM,SAASC,KAAI,SAAAC,UAAKC,SAASD,EAAG,sEADjDN,4BAAGC,4BAAGC,4BAGXF,GAAK,IACLC,GAAK,IACLC,GAAK,QAGDM,EAAGC,EADHC,IAAMC,KAAKD,IAAIV,EAAGC,EAAGC,GAAIU,IAAMD,KAAKC,IAAIZ,EAAGC,EAAGC,GACxCW,GAAKH,IAAME,KAAO,KAExBF,KAAOE,IACPJ,EAAIC,EAAI,MACL,KACCK,EAAKJ,IAAME,WACfH,EAAII,GAAK,GAAMC,GAAK,GAAKJ,IAAME,MAAQE,GAAKJ,IAAME,KAC1CF,UACCV,EAAGQ,EAAsB,KAAhBP,EAAIC,GAAKY,EAAI,cACtBb,EAAGO,EAAsB,KAAhBN,EAAIF,GAAKc,EAAI,cACtBZ,EAAGM,EAAsB,KAAhBR,EAAIC,GAAKa,EAAI,UAG5B,CAACH,KAAKI,MAAMP,GAAIG,KAAKI,MAAQ,IAAFN,GAAQE,KAAKI,MAAQ,IAAFF,mBAGrC,SAAAG,YACZC,WAAa,GACbC,QAAUC,SAASC,cAAc,YAEhB,GAAjBJ,OAAOK,OAAa,KACf,IAAIC,EAAIN,OAAOK,OAAS,EAAGC,EAAI,EAAGA,IAAK,KAClCC,GAAIZ,KAAKa,MAAMb,KAAKc,UAAYH,EAAI,SACjB,CAACN,OAAOO,IAAIP,OAAOM,IAA3CN,OAAOM,WAAIN,OAAOO,gBAGlB,IAAID,IAAI,EAAGA,KAAKN,OAAOK,OAAQC,MAChCL,YAAc,yBAA2BK,IAAI,aAAeN,OAAOM,IAAI,GAAK,QAGhFJ,QAAQQ,UAAYT,WACpBE,SAASQ,KAAKC,YAAYV,cACvB,GAAqB,GAAjBF,OAAOK,OAAa,SACvBQ,QAAS,EAEJP,IAAI,EAAGA,IAAIN,OAAOK,OAAQC,MAAK,2CACpB1B,yBAAyBoB,OAAOM,SAA3Cd,4BAAGC,4BAAGI,4BAEPA,GAAK,KACLA,EAAI,YAGJiB,SAAWnB,KAAKI,OAAO,GAAKF,GAAK,GACjCU,EAAIM,OAAS,EAAI,EAET,GAALN,GAAe,GAALA,GAEbN,YAAc,0BADdM,EAAIM,OAASN,EAAI,EAAIA,EAAI,GACoB,gBAAkBf,EAAI,KAAOC,EAAI,MAAQI,EAAI,UAC1FA,GAAQiB,SAGZD,QAAS,EAGbX,QAAQQ,UAAYT,WACpBE,SAASQ,KAAKC,YAAYV,aAG1Ba,OAASZ,SAASa,eAAe,wBAEhCb,SAASc,mBAGVF,OAAOG,iBAAiB,SAAS,WAhFF,OAA/Bf,SAASgB,kBACQhB,SAASa,eAAe,yBAC9BI,oBAEXjB,SAASkB,oBAgFTlB,SAASmB,mBAAqB,eACtBC,QAAUpB,SAASa,eAAe,yBACH,OAA/Bb,SAASgB,kBACTI,QAAQC,UAAYD,QAAQC,UAAU1C,QAAQ,mBAAoB,aAElEyC,QAAQC,UAAYD,QAAQC,UAAU1C,QAAQ,iBAAkB,iBAXxEiC,OAAOU,MAAMC,QAAU"}