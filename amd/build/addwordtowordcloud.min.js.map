{"version":3,"sources":["../src/addwordtowordcloud.js"],"names":["define","$","ajax","notification","ModalFactory","str","init","refreshtime","window","console","log","setInterval","location","reload","keypress","e","keyCode","click","mod_wordcloud_add_word","aid","word","val","call","methodname","args","done","$return","cloudhtml","create","type","types","CANCEL","title","get_string","body","warnings","message","then","modal","show","html","fail","exception"],"mappings":"AAAAA,OAAM,oCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAA6C,oBAA7C,CAAmE,UAAnE,CAAD,CACF,SAAUC,CAAV,CAAaC,CAAb,CAAmBC,CAAnB,CAAiCC,CAAjC,CAA+CC,CAA/C,CAAoD,CAChD,MAAO,CACHC,IAAI,CAAE,cAAUC,CAAV,CAAuB,CAEzBC,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBH,CAAnB,EACAI,WAAW,CAAC,UAAU,CAClBC,QAAQ,CAACC,MAAT,EACH,CAFU,CAEG,GAAZ,CAAAN,CAFS,CAAX,CAGAN,CAAC,CAAC,yBAAD,CAAD,CAA6Ba,QAA7B,CAAsC,SAAUC,CAAV,CAAa,CAE/C,GAAkB,EAAd,GAAAA,CAAC,CAACC,OAAN,CAAsB,CAClBf,CAAC,CAAC,oBAAD,CAAD,CAAwBgB,KAAxB,EACH,CACJ,CALD,EAMAhB,CAAC,CAACiB,sBAAF,CAA2B,SAAUC,CAAV,CAAe,CACtC,GAAIC,CAAAA,CAAI,CAAGnB,CAAC,CAAC,yBAAD,CAAD,CAA6BoB,GAA7B,EAAX,CACAnB,CAAI,CAACoB,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,wBADL,CAEPC,IAAI,CAAE,CAACL,GAAG,CAAEA,CAAN,CAAWC,IAAI,CAAEA,CAAjB,CAFC,CAGPK,IAAI,CAAE,cAAUC,CAAV,CAAmB,CACrB,GAAI,CAACA,CAAO,CAACC,SAAb,CAAwB,CACpBvB,CAAY,CAACwB,MAAb,CAAoB,CAChBC,IAAI,CAAEzB,CAAY,CAAC0B,KAAb,CAAmBC,MADT,CAEhBC,KAAK,CAAE3B,CAAG,CAAC4B,UAAJ,CAAe,SAAf,CAA0B,eAA1B,CAFS,CAGhBC,IAAI,CAAER,CAAO,CAACS,QAAR,CAAiB,CAAjB,EAAoBC,OAHV,CAApB,EAIGC,IAJH,CAIQ,SAAUC,CAAV,CAAiB,CACrBA,CAAK,CAACC,IAAN,EACH,CAND,CAOH,CARD,IAQO,CACHtC,CAAC,CAAC,0BAAD,CAAD,CAA8BuC,IAA9B,CAAmCd,CAAO,CAACC,SAA3C,EACA1B,CAAC,CAAC,yBAAD,CAAD,CAA6BoB,GAA7B,CAAiC,EAAjC,CACH,CACJ,CAhBM,CAiBPoB,IAAI,CAAEtC,CAAY,CAACuC,SAjBZ,CAAD,CAAV,CAmBH,CACJ,CAnCE,CAqCV,CAvCC,CAAN","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification', 'core/modal_factory', 'core/str'],\n    function ($, ajax, notification, ModalFactory, str) {\n        return {\n            init: function (refreshtime) {\n                /*setInterval($.mod_wordcloud_refresh(),refreshtime);*/\n                window.console.log(refreshtime);\n                setInterval(function(){\n                    location.reload();\n                },refreshtime*1000);\n                $('#mod-wordcloud-new-word').keypress(function (e) {\n                    // filter enter key to auto commit the word\n                    if (e.keyCode === 13) {\n                        $('#mod-wordcloud-btn').click();\n                    }\n                });\n                $.mod_wordcloud_add_word = function (aid) {\n                    var word = $('#mod-wordcloud-new-word').val();\n                    ajax.call([{\n                        methodname: 'mod_wordcloud_add_word',\n                        args: {aid: aid, word: word},\n                        done: function ($return) {\n                            if (!$return.cloudhtml) {\n                                ModalFactory.create({\n                                    type: ModalFactory.types.CANCEL,\n                                    title: str.get_string('warning', 'mod_wordcloud'),\n                                    body: $return.warnings[0].message,\n                                }).then(function (modal) {\n                                    modal.show();\n                                });\n                            } else {\n                                $('#mod-wordcloud-words-box').html($return.cloudhtml);\n                                $('#mod-wordcloud-new-word').val('');\n                            }\n                        },\n                        fail: notification.exception\n                    }]);\n                };\n            }\n        };\n    });"],"file":"addwordtowordcloud.min.js"}