{"version":3,"sources":["../src/addwordtowordcloud.js"],"names":["define","$","ajax","notification","ModalFactory","str","init","refreshtime","aid","timestamphtml","colors","keypress","e","keyCode","click","mod_wordcloud_add_word","word","val","trim","call","methodname","args","done","returnval","cloudhtml","create","type","types","CANCEL","title","get_string","body","warnings","message","then","modal","show","html","fail","exception","setInterval","stylerules","editCSS","document","createElement","i","innerHTML","appendChild"],"mappings":"AAAAA,OAAM,oCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAA6C,oBAA7C,CAAmE,UAAnE,CAAD,CACF,SAAUC,CAAV,CAAaC,CAAb,CAAmBC,CAAnB,CAAiCC,CAAjC,CAA+CC,CAA/C,CAAoD,CAChD,MAAO,CACHC,IAAI,CAAE,cAAUC,CAAV,CAAuBC,CAAvB,CAA4BC,CAA5B,CAA2CC,CAA3C,CAAmD,CACrDT,CAAC,CAAC,yBAAD,CAAD,CAA6BU,QAA7B,CAAsC,SAAUC,CAAV,CAAa,CAE/C,GAAkB,EAAd,GAAAA,CAAC,CAACC,OAAN,CAAsB,CAClBZ,CAAC,CAAC,oBAAD,CAAD,CAAwBa,KAAxB,EACH,CACJ,CALD,EAMAb,CAAC,CAACc,sBAAF,CAA2B,UAAY,CACnC,GAAIC,CAAAA,CAAI,CAAGf,CAAC,CAAC,yBAAD,CAAD,CAA6BgB,GAA7B,EAAX,CAEA,GAAI,CAACD,CAAI,CAACE,IAAL,EAAL,CAAkB,CACd,MACH,CAEDhB,CAAI,CAACiB,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,wBADL,CAEPC,IAAI,CAAE,CAACb,GAAG,CAAEA,CAAN,CAAWQ,IAAI,CAAEA,CAAjB,CAFC,CAGPM,IAAI,CAAE,cAAUC,CAAV,CAAqB,CACvB,GAAI,CAACA,CAAS,CAACC,SAAf,CAA0B,CACtBpB,CAAY,CAACqB,MAAb,CAAoB,CAChBC,IAAI,CAAEtB,CAAY,CAACuB,KAAb,CAAmBC,MADT,CAEhBC,KAAK,CAAExB,CAAG,CAACyB,UAAJ,CAAe,SAAf,CAA0B,eAA1B,CAFS,CAGhBC,IAAI,CAAER,CAAS,CAACS,QAAV,CAAmB,CAAnB,EAAsBC,OAHZ,CAApB,EAIGC,IAJH,CAIQ,SAAUC,CAAV,CAAiB,CACrBA,CAAK,CAACC,IAAN,EACH,CAND,CAOH,CARD,IAQO,CACHnC,CAAC,CAAC,0BAAD,CAAD,CAA8BoC,IAA9B,CAAmCd,CAAS,CAACC,SAA7C,EACAvB,CAAC,CAAC,yBAAD,CAAD,CAA6BgB,GAA7B,CAAiC,EAAjC,CACH,CACJ,CAhBM,CAiBPqB,IAAI,CAAEnC,CAAY,CAACoC,SAjBZ,CAAD,CAAV,CAmBH,CA1BD,CA2BAC,WAAW,CAAC,UAAU,CAClBtC,CAAI,CAACiB,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,yBADL,CAEPC,IAAI,CAAE,CAACb,GAAG,CAAEA,CAAN,CAAWC,aAAa,CAAEA,CAA1B,CAFC,CAGPa,IAAI,CAAE,cAAUC,CAAV,CAAqB,CACvB,GAAIA,CAAS,CAACC,SAAd,CAAyB,CACrBvB,CAAC,CAAC,0BAAD,CAAD,CAA8BoC,IAA9B,CAAmCd,CAAS,CAACC,SAA7C,EACAf,CAAa,CAAGc,CAAS,CAACd,aAC7B,CACJ,CARM,CASP6B,IAAI,CAAEnC,CAAY,CAACoC,SATZ,CAAD,CAAV,CAWH,CAZU,CAYG,GAAZ,CAAAhC,CAZS,CAAX,CAiBA,OAHIkC,CAAAA,CAAU,CAAG,EAGjB,CAFIC,CAAO,CAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAEd,CAASC,CAAC,CAAG,CAAb,CAAqB,CAAL,EAAAA,CAAhB,CAAwBA,CAAC,EAAzB,CAA6B,CACzBJ,CAAU,EAAI,mBAAqBI,CAArB,CAAyB,YAAzB,CAAwCnC,CAAM,CAACmC,CAAC,CAAC,CAAH,CAA9C,CAAsD,OACvE,CAEDH,CAAO,CAACI,SAAR,CAAoBL,CAApB,CACAE,QAAQ,CAACZ,IAAT,CAAcgB,WAAd,CAA0BL,CAA1B,CACH,CA1DE,CA4DV,CA9DC,CAAN","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification', 'core/modal_factory', 'core/str'],\n    function ($, ajax, notification, ModalFactory, str) {\n        return {\n            init: function (refreshtime, aid, timestamphtml, colors) {\n                $('#mod-wordcloud-new-word').keypress(function (e) {\n                    // filter enter key to auto commit the word\n                    if (e.keyCode === 13) {\n                        $('#mod-wordcloud-btn').click();\n                    }\n                });\n                $.mod_wordcloud_add_word = function () {\n                    var word = $('#mod-wordcloud-new-word').val();\n\n                    if (!word.trim()) {\n                        return;\n                    }\n\n                    ajax.call([{\n                        methodname: 'mod_wordcloud_add_word',\n                        args: {aid: aid, word: word},\n                        done: function (returnval) {\n                            if (!returnval.cloudhtml) {\n                                ModalFactory.create({\n                                    type: ModalFactory.types.CANCEL,\n                                    title: str.get_string('warning', 'mod_wordcloud'),\n                                    body: returnval.warnings[0].message,\n                                }).then(function (modal) {\n                                    modal.show();\n                                });\n                            } else {\n                                $('#mod-wordcloud-words-box').html(returnval.cloudhtml);\n                                $('#mod-wordcloud-new-word').val('');\n                            }\n                        },\n                        fail: notification.exception\n                    }]);\n                };\n                setInterval(function(){\n                    ajax.call([{\n                        methodname: 'mod_wordcloud_get_words',\n                        args: {aid: aid, timestamphtml: timestamphtml},\n                        done: function (returnval) {\n                            if (returnval.cloudhtml) {\n                                $('#mod-wordcloud-words-box').html(returnval.cloudhtml);\n                                timestamphtml = returnval.timestamphtml;\n                            }\n                        },\n                        fail: notification.exception\n                    }]);\n                },refreshtime*1000);\n\n                var stylerules = '';\n                var editCSS = document.createElement('style');\n\n                for (var i = 1; i <= 6; i++) {\n                    stylerules += '.mod-wordcloud-w' + i + ' {color: #' + colors[i-1] + ';} \\n';\n                }\n\n                editCSS.innerHTML = stylerules;\n                document.body.appendChild(editCSS);\n            }\n        };\n    });"],"file":"addwordtowordcloud.min.js"}